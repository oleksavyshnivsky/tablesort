function getCellIndex(a){var t=a.parentNode,r=Array.from(t.parentNode.children).indexOf(t);let s=0;for(let e=0;e<t.cells.length;e++){var l=t.cells[e].colSpan;if(s+=l,0===r){if(e===a.cellIndex)return s-1}else if(!isNaN(parseInt(a.dataset.sortCol)))return parseInt(a.dataset.sortCol)}return s-1}function tablesort(e){var a=e.currentTarget.closest("table"),t=getCellIndex(e.currentTarget),r=e.currentTarget.dataset.sort,s=a.querySelector("th[data-dir]"),s=(s&&s!==e.currentTarget&&delete s.dataset.dir,e.currentTarget.dataset.dir?"asc"===e.currentTarget.dataset.dir?"desc":"asc":e.currentTarget.dataset.sortDefault||"asc"),l=(e.currentTarget.dataset.dir=s,[]);a.querySelectorAll("tbody tr").forEach((e,a)=>{l.push({tr:e,values:[]}),e.querySelectorAll("th,td").forEach(e=>{e=e.dataset.sortValue||e.innerText;"int"===r?e=parseInt(e):"float"===r?e=parseFloat(e):"date"===r&&(e=new Date(e)),l[a].values.push(e)})}),l.sort("string"===r?"asc"===s?(e,a)=>(""+e.values[t]).localeCompare(a.values[t]):(e,a)=>-(""+e.values[t]).localeCompare(a.values[t]):"asc"===s?(e,a)=>isNaN(e.values[t])||isNaN(a.values[t])?isNaN(e.values[t])?isNaN(a.values[t])?0:-1:1:e.values[t]<a.values[t]?-1:e.values[t]>a.values[t]?1:0:(e,a)=>isNaN(e.values[t])||isNaN(a.values[t])?isNaN(e.values[t])?isNaN(a.values[t])?0:1:-1:e.values[t]<a.values[t]?1:e.values[t]>a.values[t]?-1:0);const u=document.createDocumentFragment();l.forEach(e=>u.appendChild(e.tr)),a.querySelector("tbody").replaceChildren(u)}Node.prototype.tsortable=function(){this.querySelectorAll("thead th[data-sort], thead td[data-sort]").forEach(e=>e.onclick=tablesort)};